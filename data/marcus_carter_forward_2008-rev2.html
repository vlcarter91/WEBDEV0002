<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Marcus Carter - Game Metrics Dashboard</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 2em;
      background: #f4f4f4;
    }
    h2 {
      margin-bottom: 0.5em;
    }
    #controls {
      margin-bottom: 2em;
    }
    canvas {
      background: white;
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 1em;
    }
  </style>
</head>
<body>
  <h2>Marcus Carter - Filterable Game Metrics Dashboard</h2>
  <div id="controls">
    <label for="metric">Select Metric:</label>
    <select id="metric">
      <option value="points">Total Points</option>
      <option value="goals">Goals</option>
      <option value="assists">Assists</option>
      <option value="shots">Shots</option>
      <option value="sog">Shots on Goal</option>
      <option value="plus_minus">Plus/Minus</option>
      <option value="faceoffs_won">Faceoffs Won</option>
      <option value="faceoffs_lost">Faceoffs Lost</option>
      <option value="hits">Hits</option>
      <option value="hits_against">Hits Against</option>
      <option value="blocked_shots">Blocked Shots</option>
      <option value="corsi">CORSI</option>
    </select>
  </div>
  <canvas id="metricChart" width="1200" height="500"></canvas>

  <script>
    const rawData = [];
    // You will dynamically insert parsed JSON data from your dataset here
    // Format:
    // rawData.push({ label: '01/01/25 - vs Team Name', goals: 1, assists: 0, ... });

    const ctx = document.getElementById('metricChart').getContext('2d');
    const metricSelect = document.getElementById('metric');

    let chart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: [],
        datasets: [{
          label: '',
          data: [],
          backgroundColor: 'steelblue'
        }]
      },
      options: {
        responsive: true,
        indexAxis: 'y',
        scales: {
          x: {
            beginAtZero: true
          }
        }
      }
    });

    function updateChart(metric) {
      chart.data.labels = rawData.map(row => row.label);
      chart.data.datasets[0].data = rawData.map(row => row[metric]);
      chart.data.datasets[0].label = metric;
      chart.update();
    }

    metricSelect.addEventListener('change', () => {
      updateChart(metricSelect.value);
    });

    // Example seed data
    rawData.push({ label: '01/01/25 - vs Eagles', goals: 2, assists: 1, points: 3, shots: 5, sog: 3, plus_minus: 1, faceoffs_won: 8, faceoffs_lost: 4, hits: 2, hits_against: 1, blocked_shots: 1, corsi: 5 });
    rawData.push({ label: '03/01/25 - @ Titans', goals: 0, assists: 0, points: 0, shots: 3, sog: 2, plus_minus: -1, faceoffs_won: 10, faceoffs_lost: 6, hits: 1, hits_against: 3, blocked_shots: 0, corsi: -2 });
    rawData.push({ label: '05/01/25 - vs Kings', goals: 1, assists: 2, points: 3, shots: 6, sog: 4, plus_minus: 2, faceoffs_won: 7, faceoffs_lost: 5, hits: 3, hits_against: 0, blocked_shots: 2, corsi: 9 });

    updateChart('points');
  </script>
</body>
</html>
